<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ACW Offerteplatform – offerte platform</title>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{ --acw-red:#D52B1E; --acw-black:#222222; --radius:14px }
    *{box-sizing:border-box}
    body{ margin:0; font-family:'Rajdhani',system-ui,-apple-syst...lvetica Neue",Arial,sans-serif; background:#f7f7f8; color:#111 }
    header{ background:#222222; color:#fff; border-bottom:4px solid var(--acw-red) }
    .head{ display:flex; gap:12px; align-items:center; padding:12px 16px }
    .head img{ height:36px }
    .head h1{ margin:0; font-size:18px }
    .nav{ margin-left:auto; display:flex; gap:8px; align-items:center }
    .tab{ background:transparent; color:#fff; border:1px solid #...radius:10px; padding:6px 10px; cursor:pointer; font-weight:700 }
    .tab.active{ background:#ffffff1a }
    .pill{ padding:2px 10px; border-radius:999px; background:#ffffff22; color:#fff; font-size:12px; font-weight:700 }
    .container{ max-width:1060px; margin:18px auto; padding:0 14px }
    .card{ background:#fff; border:1px solid #e5e7eb; border-rad...w:0 2px 12px rgba(0,0,0,.05); padding:18px; margin-bottom:14px }
    .title{ font-size:18px; font-weight:800; margin:0 0 8px }
    .muted{ color:#6b7280; font-size:14px }
    .row{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
    @media(max-width:760px){ .row{ grid-template-columns:1fr } }
    label{ display:block; font-weight:700; margin:8px 0 4px }
    input,select,textarea{ width:100%; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; font-size:16px }
    .btn{ display:inline-flex; align-items:center; gap:8px; padd... border:none; cursor:pointer; font-weight:800; background:var(--acw-red); color:#fff; border-radius:12px }
    .btn.ghost{ background:#f3f4f6; color:#111 }
    .hidden{ display:none }
    .right{ text-align:right }
    .grid-3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px }
    @media(max-width:820px){ .grid-3{ grid-template-columns:1fr } }
  </style>
</head>
<body>
  <header>
    <div class="head">
      <img src="https://dummyimage.com/120x36/ffffff/000000.png&text=ACW" alt="ACW logo">
      <h1>Offerteplatform</h1>
      <nav class="nav">
        <button id="tabHome" class="tab active">Home</button>
        <button id="tabQuotes" class="tab">Offertes</button>
        <button id="tabDashboard" class="tab">Dashboard</button>
        <span class="pill" id="currentUser">ingelogd</span>
      </nav>
    </div>
  </header>
  <main class="container">

    <!-- HOME -->
    <section id="viewHome" class="card">
      <h2 class="title">Welkom</h2>
      <p class="muted">Start een nieuwe offerte of ga verder met concepten.</p>
      <div style="display:flex; gap:10px; flex-wrap:wrap">
        <button id="btnNewQuote" class="btn">Nieuwe offerte maken</button>
        <button id="btnOpenQuotes" class="btn ghost">Mijn offertes</button>
      </div>
    </section>

    <!-- QUOTE LIST -->
    <section id="viewQuoteList" class="card hidden">
      <h2 class="title">Offertes</h2>
      <div id="quoteList"></div>
    </section>

    <!-- QUOTE TYPE PICKER (NIEUW) -->
    <section id="viewQuoteType" class="card hidden">
      <h2 class="title">Nieuwe offerte maken</h2>
      <p class="muted">Kies het type offerte om te starten.</p>

      <div class="row" style="margin-top:8px">
        <!-- Actieve optie -->
        <div class="card" style="margin:0; border-color:#e5e7eb">
          <h3 class="title" style="font-size:16px;margin:0 0 6px">Reguliere schoonmaak offerte</h3>
          <p class="muted" style="margin:0 0 10px">Periodieke schoonmaak (dagelijks/wekelijks/maandelijks) met ruimtes, frequenties en tariefopbouw.</p>
          <button id="btnPickRegularCleaning" class="btn">Deze optie kiezen</button>
        </div>

        <!-- Toekomstige opties (placeholder) -->
        <div class="card" style="margin:0; opacity:.5;pointer-events:none">
          <h3 class="title" style="font-size:16px;margin:0 0 6px">Projectmatige schoonmaak</h3>
          <p class="muted" style="margin:0">Binnenkort beschikbaar.</p>
        </div>
      </div>

      <div style="margin-top:12px">
        <button id="btnBackType" class="btn ghost">Terug</button>
      </div>
    </section>

    <!-- QUOTE EDIT -->
    <section id="viewQuoteEdit" class="card hidden">
      <h2 class="title">Offerte bewerken</h2>
      <div class="grid-3">
        <div>
          <label>Offertenaam</label>
          <input id="quoteTitle" placeholder="Bijv. Reguliere schoonmaak – ACME HQ">
        </div>
        <div>
          <label>Klant</label>
          <input id="quoteClient" placeholder="Klantnaam">
        </div>
        <div>
          <label>Status</label>
          <select id="quoteStatus">
            <option value="concept">Concept</option>
            <option value="verzonden">Verzonden</option>
            <option value="geaccepteerd">Geaccepteerd</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div>
          <label>Waarde (incl. btw)</label>
          <input id="quoteValue" type="number" step="0.01" placeholder="0,00">
        </div>
        <div class="right" style="align-self:end">
          <button id="btnSaveQuote" class="btn">Opslaan</button>
        </div>
      </div>
    </section>

    <!-- DASHBOARD (dummy) -->
    <section id="viewDashboard" class="card hidden">
      <h2 class="title">Dashboard</h2>
      <p class="muted">Statistieken volgen later.</p>
    </section>

  </main>

  <script>
    // --- util ---
    const el = (id)=>document.getElementById(id);
    const show=(id)=>el(id).classList.remove('hidden');
    const hide=(id)=>el(id).classList.add('hidden');

    function setActiveTab(tab){
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      if(tab) el(tab).classList.add('active');
    }

    // keuze van type nieuwe offerte wordt hier tijdelijk bewaard
    let NEW_QUOTE_KIND = null;
    function openQuoteType(){
      hide('viewHome'); hide('viewDashboard'); hide('viewAccount'); hide('viewUsers'); hide('viewQuoteList'); hide('viewQuoteEdit');
      show('viewQuoteType'); setActiveTab(null);
    }

    // --- minimale fake data store (vervang met Supabase in jouw project) ---
    let QUOTES = [];
    const fakeId = ()=>Math.random().toString(36).slice(2,10);

    async function createQuote(){
      const id = fakeId();
      const number = 'Q' + new Date().getFullYear().toString().slice(2) + '-' + (QUOTES.length+1).toString().padStart(4,'0');
      const q = { id, number, title:'', client:'', value_incl:0, status:'concept' };
      QUOTES.push(q);
      return { id, number };
    }

    async function loadQuotes(){
      const list = el('quoteList');
      list.innerHTML = '';
      if(QUOTES.length===0){ list.innerHTML = '<p class="muted">Nog geen offertes.</p>'; return }
      QUOTES.forEach(q=>{
        const div = document.createElement('div');
        div.className='card'; div.style.margin='0 0 10px';
        div.innerHTML = `<strong>${q.number}</strong> – ${q.title||'<em>naamloos</em>'} <span class="muted">(${q.status})</span>
          <div class="right"><button class="btn" data-id="${q.id}">Openen</button></div>`;
        div.querySelector('button').onclick=()=>openQuoteEdit(q.id);
        list.appendChild(div);
      })
    }

    async function openQuoteList(){
      hide('viewHome'); hide('viewDashboard'); hide('viewQuoteEdit'); hide('viewQuoteType');
      show('viewQuoteList'); setActiveTab('tabQuotes'); await loadQuotes();
    }

    async function openQuoteEdit(id){
      hide('viewHome'); hide('viewQuoteList'); hide('viewDashboard'); hide('viewQuoteType');
      show('viewQuoteEdit'); setActiveTab('tabQuotes');

      let q = null;
      if(!id){
        const created = await createQuote();
        id = created.id;
        q = { id, number: created.number, title:'', client:'', value_incl:0, status:'concept' };
        // Prefill op basis van keuze uit keuzemenu
        if(NEW_QUOTE_KIND === 'regular_cleaning'){
          q.title = 'Reguliere schoonmaak – ';
        }
        NEW_QUOTE_KIND = null; // reset
      } else {
        q = QUOTES.find(x=>x.id===id);
      }

      el('quoteTitle').value = q.title || '';
      el('quoteClient').value = q.client || '';
      el('quoteStatus').value = q.status || 'concept';
      el('quoteValue').value = q.value_incl || 0;

      el('btnSaveQuote').onclick=()=>{
        q.title = el('quoteTitle').value.trim();
        q.client = el('quoteClient').value.trim();
        q.status = el('quoteStatus').value;
        q.value_incl = Number(el('quoteValue').value)||0;
        const i = QUOTES.findIndex(x=>x.id===q.id); if(i>-1) QUOTES[i]=q;
        openQuoteList();
      }
    }

    function route(){
      hide('viewQuoteList'); hide('viewQuoteEdit'); hide('viewQuoteType'); hide('viewDashboard');
      show('viewHome'); setActiveTab('tabHome');
    }

    // --- events ---
    el('tabHome').onclick=()=>route();
    el('tabQuotes').onclick=()=>openQuoteList();
    el('tabDashboard').onclick=()=>{ hide('viewHome'); hide('viewQuoteList'); hide('viewQuoteEdit'); hide('viewQuoteType'); show('viewDashboard'); setActiveTab('tabDashboard') };

    // Home: eerst naar keuzemenu
    el('btnNewQuote').onclick=()=>openQuoteType();
    el('btnOpenQuotes').onclick=()=>openQuoteList();

    // Keuzemenu events
    const pickBtn = el('btnPickRegularCleaning'); if(pickBtn){
      pickBtn.onclick=()=>{ NEW_QUOTE_KIND='regular_cleaning'; openQuoteEdit(null); };
    }
    const backType = el('btnBackType'); if(backType){
      backType.onclick=()=>route();
    }

    // init
    route();
  </script>
</body>
</html>
